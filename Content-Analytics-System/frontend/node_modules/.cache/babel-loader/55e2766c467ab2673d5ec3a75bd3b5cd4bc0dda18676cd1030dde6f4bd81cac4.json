{"ast":null,"code":"import axios from 'axios';\nclass PlatformService {\n  constructor() {\n    // Use environment variable with fallback\n    this.baseURL = 'http://localhost:8080/api';\n    this.platformsURL = `${this.baseURL}/platforms`;\n    this.contentURL = `${this.baseURL}/content`;\n  }\n\n  // Platform methods\n  async getUserPlatforms() {\n    try {\n      const response = await axios.get(this.platformsURL);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching platforms:', error);\n      throw error;\n    }\n  }\n  async addPlatform(platformData) {\n    try {\n      console.log(\"Adding platform with data:\", platformData);\n      const response = await axios.post(this.platformsURL, platformData);\n      console.log(\"Platform creation response:\", response);\n\n      // Properly handle potentially stringified data\n      let parsedData; // Changed variable name to avoid conflict\n      if (typeof response.data === 'string') {\n        try {\n          parsedData = JSON.parse(response.data);\n        } catch (parseError) {\n          console.error(\"Error parsing platform data:\", parseError);\n          parsedData = {\n            id: null\n          };\n        }\n      } else {\n        parsedData = response.data;\n      }\n      return {\n        success: true,\n        data: parsedData,\n        // Now always an object, not a string\n        status: response.status\n      };\n    } catch (error) {\n      var _error$response;\n      console.error('Error adding platform:', error);\n      return {\n        success: false,\n        error: error.message,\n        status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status\n      };\n    }\n  }\n\n  // Content methods\n  async addContent(contentData) {\n    try {\n      const response = await axios.post(this.contentURL, contentData);\n      return response.data;\n    } catch (error) {\n      console.error('Error adding content:', error);\n      throw error;\n    }\n  }\n  async getContentByPlatform(platformId) {\n    try {\n      const response = await axios.get(`${this.platformsURL}/${platformId}/content`);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching content:', error);\n      throw error;\n    }\n  }\n}\nexport default new PlatformService();","map":{"version":3,"names":["axios","PlatformService","constructor","baseURL","platformsURL","contentURL","getUserPlatforms","response","get","data","error","console","addPlatform","platformData","log","post","parsedData","JSON","parse","parseError","id","success","status","_error$response","message","addContent","contentData","getContentByPlatform","platformId"],"sources":["E:/Official/University/Content Analytics v4/Content-Analytics-System/frontend/src/services/PlatformService.jsx"],"sourcesContent":["import axios from 'axios';\r\n\r\nclass PlatformService {\r\n    constructor() {\r\n        // Use environment variable with fallback\r\n        this.baseURL = 'http://localhost:8080/api';\r\n        this.platformsURL = `${this.baseURL}/platforms`;\r\n        this.contentURL = `${this.baseURL}/content`;\r\n    }\r\n\r\n    // Platform methods\r\n    async getUserPlatforms() {\r\n        try {\r\n            const response = await axios.get(this.platformsURL);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching platforms:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async addPlatform(platformData) {\r\n        try {\r\n            console.log(\"Adding platform with data:\", platformData);\r\n            const response = await axios.post(this.platformsURL, platformData);\r\n            console.log(\"Platform creation response:\", response);\r\n\r\n            // Properly handle potentially stringified data\r\n            let parsedData;  // Changed variable name to avoid conflict\r\n            if (typeof response.data === 'string') {\r\n                try {\r\n                    parsedData = JSON.parse(response.data);\r\n                } catch (parseError) {\r\n                    console.error(\"Error parsing platform data:\", parseError);\r\n                    parsedData = { id: null };\r\n                }\r\n            } else {\r\n                parsedData = response.data;\r\n            }\r\n\r\n            return {\r\n                success: true,\r\n                data: parsedData,  // Now always an object, not a string\r\n                status: response.status\r\n            };\r\n        } catch (error) {\r\n            console.error('Error adding platform:', error);\r\n            return {\r\n                success: false,\r\n                error: error.message,\r\n                status: error.response?.status\r\n            };\r\n        }\r\n    }\r\n\r\n    // Content methods\r\n    async addContent(contentData) {\r\n        try {\r\n            const response = await axios.post(this.contentURL, contentData);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error adding content:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n\r\n    async getContentByPlatform(platformId) {\r\n        try {\r\n            const response = await axios.get(`${this.platformsURL}/${platformId}/content`);\r\n            return response.data;\r\n        } catch (error) {\r\n            console.error('Error fetching content:', error);\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n\r\nexport default new PlatformService();"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,eAAe,CAAC;EAClBC,WAAWA,CAAA,EAAG;IACV;IACA,IAAI,CAACC,OAAO,GAAG,2BAA2B;IAC1C,IAAI,CAACC,YAAY,GAAG,GAAG,IAAI,CAACD,OAAO,YAAY;IAC/C,IAAI,CAACE,UAAU,GAAG,GAAG,IAAI,CAACF,OAAO,UAAU;EAC/C;;EAEA;EACA,MAAMG,gBAAgBA,CAAA,EAAG;IACrB,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,IAAI,CAACJ,YAAY,CAAC;MACnD,OAAOG,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,MAAMA,KAAK;IACf;EACJ;EAEA,MAAME,WAAWA,CAACC,YAAY,EAAE;IAC5B,IAAI;MACAF,OAAO,CAACG,GAAG,CAAC,4BAA4B,EAAED,YAAY,CAAC;MACvD,MAAMN,QAAQ,GAAG,MAAMP,KAAK,CAACe,IAAI,CAAC,IAAI,CAACX,YAAY,EAAES,YAAY,CAAC;MAClEF,OAAO,CAACG,GAAG,CAAC,6BAA6B,EAAEP,QAAQ,CAAC;;MAEpD;MACA,IAAIS,UAAU,CAAC,CAAE;MACjB,IAAI,OAAOT,QAAQ,CAACE,IAAI,KAAK,QAAQ,EAAE;QACnC,IAAI;UACAO,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACX,QAAQ,CAACE,IAAI,CAAC;QAC1C,CAAC,CAAC,OAAOU,UAAU,EAAE;UACjBR,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAES,UAAU,CAAC;UACzDH,UAAU,GAAG;YAAEI,EAAE,EAAE;UAAK,CAAC;QAC7B;MACJ,CAAC,MAAM;QACHJ,UAAU,GAAGT,QAAQ,CAACE,IAAI;MAC9B;MAEA,OAAO;QACHY,OAAO,EAAE,IAAI;QACbZ,IAAI,EAAEO,UAAU;QAAG;QACnBM,MAAM,EAAEf,QAAQ,CAACe;MACrB,CAAC;IACL,CAAC,CAAC,OAAOZ,KAAK,EAAE;MAAA,IAAAa,eAAA;MACZZ,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C,OAAO;QACHW,OAAO,EAAE,KAAK;QACdX,KAAK,EAAEA,KAAK,CAACc,OAAO;QACpBF,MAAM,GAAAC,eAAA,GAAEb,KAAK,CAACH,QAAQ,cAAAgB,eAAA,uBAAdA,eAAA,CAAgBD;MAC5B,CAAC;IACL;EACJ;;EAEA;EACA,MAAMG,UAAUA,CAACC,WAAW,EAAE;IAC1B,IAAI;MACA,MAAMnB,QAAQ,GAAG,MAAMP,KAAK,CAACe,IAAI,CAAC,IAAI,CAACV,UAAU,EAAEqB,WAAW,CAAC;MAC/D,OAAOnB,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7C,MAAMA,KAAK;IACf;EACJ;EAGA,MAAMiB,oBAAoBA,CAACC,UAAU,EAAE;IACnC,IAAI;MACA,MAAMrB,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,GAAG,IAAI,CAACJ,YAAY,IAAIwB,UAAU,UAAU,CAAC;MAC9E,OAAOrB,QAAQ,CAACE,IAAI;IACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACf;EACJ;AACJ;AAEA,eAAe,IAAIT,eAAe,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}